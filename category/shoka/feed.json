{
    "version": "https://jsonfeed.org/version/1",
    "title": "dpm12345 • All posts by \"shoka\" category",
    "description": "学习记录",
    "home_page_url": "http://dpm12345.cn",
    "items": [
        {
            "id": "http://dpm12345.cn/posts/f5c52549/",
            "url": "http://dpm12345.cn/posts/f5c52549/",
            "title": "shoka主题添加文章统计",
            "date_published": "2023-01-20T15:50:11.000Z",
            "content_html": "<p>参考自<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubGF2ZW5kZXJkaC5jbi8=\"> Lavender</span> 的文章：<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubGF2ZW5kZXJkaC5jbi9wb3N0cy8zMjY1MTczNzAxLw==\">Shoka 主题：新增文章统计页面</span></p>\n<h1 id=\"添加统计页面\"><a class=\"anchor\" href=\"#添加统计页面\">#</a> 添加统计页面</h1>\n<ol>\n<li>\n<p>安装  <code>cheerio</code> ，控制台执行</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tbody><tr><td data-num=\"1\"></td><td><pre>npm i cheerio --save`</pre></td></tr></tbody></table></figure></li>\n<li>\n<p>新建统计页面</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tbody><tr><td data-num=\"1\"></td><td><pre>hexo new page statistics</pre></td></tr></tbody></table></figure></li>\n</ol>\n<p>可以看到 <code>source</code>  目录下 (如果没改) 多了一个 <code>statistics</code>  文件夹，其中有一个 <code>index.md</code>  文件，进入后，可以修改 <code>title</code>  项，即改变该页面的标题显示文字</p>\n<p>之后复制以下内容，作为页面内容 (开头和结尾的 <code>\\</code>  均需删掉)</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tbody><tr><td data-num=\"1\"></td><td><pre>\\{\\% raw \\%\\}</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://cdn.jsdelivr.net/npm/echarts@5.2.2/dist/echarts.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"><span class=\"token language-javascript\"></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">switchPostChart</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token comment\">// 这里为了统一颜色选取的是 “明暗模式” 下的两种字体颜色，也可以自己定义</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">let</span> color <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-theme'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">'dark'</span> <span class=\"token operator\">?</span> <span class=\"token string\">'#333'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'#ccc'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">let</span> darkmode <span class=\"token operator\">=</span> color <span class=\"token operator\">===</span> <span class=\"token string\">\"#ccc\"</span> <span class=\"token operator\">?</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">:</span> <span class=\"token boolean\">false</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'posts-calendar'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">let</span> postsCalendarNew <span class=\"token operator\">=</span> postsCalendarOption</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    postsCalendarNew<span class=\"token punctuation\">.</span>darkMode <span class=\"token operator\">=</span> darkmode</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    postsCalendarNew<span class=\"token punctuation\">.</span>textStyle<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> color</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    postsCalendarNew<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">.</span>textStyle<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> color</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    postsCalendarNew<span class=\"token punctuation\">.</span>visualMap<span class=\"token punctuation\">.</span>textStyle<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> color</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> postsCalendarNew<span class=\"token punctuation\">.</span>calendar<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      postsCalendarNew<span class=\"token punctuation\">.</span>calendar<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>yearLabel<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> color</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>      postsCalendarNew<span class=\"token punctuation\">.</span>calendar<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>monthLabel<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> color</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      postsCalendarNew<span class=\"token punctuation\">.</span>calendar<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>dayLabel<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> color</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    postsCalendar<span class=\"token punctuation\">.</span><span class=\"token function\">setOption</span><span class=\"token punctuation\">(</span>postsCalendarNew<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'posts-chart'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">let</span> postsOptionNew <span class=\"token operator\">=</span> postsOption</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    postsOptionNew<span class=\"token punctuation\">.</span>darkMode <span class=\"token operator\">=</span> darkmode</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    postsOptionNew<span class=\"token punctuation\">.</span>textStyle<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> color</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    postsOptionNew<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">.</span>textStyle<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> color</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    postsOptionNew<span class=\"token punctuation\">.</span>xAxis<span class=\"token punctuation\">.</span>axisLine<span class=\"token punctuation\">.</span>lineStyle<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> color</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    postsOptionNew<span class=\"token punctuation\">.</span>yAxis<span class=\"token punctuation\">.</span>axisLine<span class=\"token punctuation\">.</span>lineStyle<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> color</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    postsChart<span class=\"token punctuation\">.</span><span class=\"token function\">setOption</span><span class=\"token punctuation\">(</span>postsOptionNew<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  <span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tags-chart'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token keyword\">let</span> tagsOptionNew <span class=\"token operator\">=</span> tagsOption</pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    tagsOptionNew<span class=\"token punctuation\">.</span>darkMode <span class=\"token operator\">=</span> darkmode</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    tagsOptionNew<span class=\"token punctuation\">.</span>textStyle<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> color</pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    tagsOptionNew<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">.</span>textStyle<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> color</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    tagsOptionNew<span class=\"token punctuation\">.</span>xAxis<span class=\"token punctuation\">.</span>axisLine<span class=\"token punctuation\">.</span>lineStyle<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> color</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    tagsOptionNew<span class=\"token punctuation\">.</span>yAxis<span class=\"token punctuation\">.</span>axisLine<span class=\"token punctuation\">.</span>lineStyle<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> color</pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    tagsChart<span class=\"token punctuation\">.</span><span class=\"token function\">setOption</span><span class=\"token punctuation\">(</span>tagsOptionNew<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  <span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'categories-chart'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token keyword\">let</span> categoriesOptionNew <span class=\"token operator\">=</span> categoriesOption</pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    categoriesOptionNew<span class=\"token punctuation\">.</span>darkMode <span class=\"token operator\">=</span> darkmode</pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    categoriesOptionNew<span class=\"token punctuation\">.</span>textStyle<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> color</pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    categoriesOptionNew<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">.</span>textStyle<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> color</pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    categoriesOptionNew<span class=\"token punctuation\">.</span>legend<span class=\"token punctuation\">.</span>textStyle<span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> color</pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    categoriesChart<span class=\"token punctuation\">.</span><span class=\"token function\">setOption</span><span class=\"token punctuation\">(</span>categoriesOptionNew<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>  <span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByClassName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"theme\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>switchPostChart<span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token comment\">&lt;!-- 文章发布日历 --&gt;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>posts-calendar<span class=\"token punctuation\">\"</span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span> 8px<span class=\"token punctuation\">;</span> <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 300px<span class=\"token punctuation\">;</span> <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token comment\">&lt;!-- 文章发布时间统计图 --&gt;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>posts-chart<span class=\"token punctuation\">\"</span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span> 8px<span class=\"token punctuation\">;</span> <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 300px<span class=\"token punctuation\">;</span> <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre><span class=\"token comment\">&lt;!-- 文章标签统计图 --&gt;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tags-chart<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-length</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span> 8px<span class=\"token punctuation\">;</span> <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 300px<span class=\"token punctuation\">;</span> <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre><span class=\"token comment\">&lt;!-- 文章分类统计图 --&gt;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>categories-chart<span class=\"token punctuation\">\"</span></span>  <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span> 8px<span class=\"token punctuation\">;</span> <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 300px<span class=\"token punctuation\">;</span> <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>\\{\\% endraw \\%\\}</pre></td></tr></tbody></table></figure><h1 id=\"修改对应配置\"><a class=\"anchor\" href=\"#修改对应配置\">#</a> 修改对应配置</h1>\n<ol start=\"3\">\n<li>然后找到 <code>themes/shoka/languages</code>  文件夹，找到对应的使用语言的 <code>yml</code>  文件，在这里，我使用的是 <code>zh-CN.yml</code></li>\n</ol>\n<p>找到 <code>menu</code>  项</p>\n<p>原内容</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tbody><tr><td data-num=\"1\"></td><td><pre>menu:</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  home: 首页</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  posts: 文章</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  archives: 归档</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  categories: 分类</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  tags: 标签</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  about: 关于</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  search: 搜索</pre></td></tr></tbody></table></figure><p>修改后</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tbody><tr><td data-num=\"1\"></td><td><pre>menu:</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  home: 首页</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  posts: 文章</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  archives: 归档</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  categories: 分类</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  tags: 标签</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  about: 关于</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  search: 搜索</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  statistics: 统计</pre></td></tr></tbody></table></figure><p>其中 <code>统计</code> 为页面导航栏显示的文字</p>\n<ol start=\"4\">\n<li>设置路径</li>\n</ol>\n<p>找到主题配置文件 <code>_config.shoka.yml</code>  下的 <code>menu</code>  栏，添加</p>\n<figure class=\"highlight raw\"><figcaption data-lang=\"\"></figcaption><table><tbody><tr><td data-num=\"1\"></td><td><pre>statistics: /statistics/ || shuzhuangtu</pre></td></tr></tbody></table></figure><p>其中 <code>/statistic/</code>  为该页面文件在网站目录的路径</p>\n<p><code>shuzhuangtu</code>  为使用的 <code>iconfont</code> ，具体添加方法参考<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWUvY29tcHV0ZXItc2NpZW5jZS9ub3RlL3RoZW1lLXNob2thLWRvYy9jb25maWcvI2ljb25mb250JUU1JTlCJUJFJUU2JUEwJTg3\"> shoka 主题基本配置</span></p>\n<h1 id=\"添加代码\"><a class=\"anchor\" href=\"#添加代码\">#</a> 添加代码</h1>\n<ol start=\"5\">\n<li>添加文章统计代码</li>\n</ol>\n<p>找到 <code>themes\\shoka\\scripts\\helpers</code> ，新建 <code>charts.js</code>  文件，输入以下内容</p>\n<figure class=\"highlight javascript\"><figcaption data-lang=\"javascript\"></figcaption><table><tbody><tr><td data-num=\"1\"></td><td><pre><span class=\"token string\">'use strict'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">const</span> cheerio <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'cheerio'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> moment <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'moment'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>hexo<span class=\"token punctuation\">.</span>extend<span class=\"token punctuation\">.</span>filter<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">'after_render:html'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">locals</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">const</span> $ <span class=\"token operator\">=</span> cheerio<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>locals<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token keyword\">const</span> calendar <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#posts-calendar'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token keyword\">const</span> post <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#posts-chart'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token keyword\">const</span> tag <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#tags-chart'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token keyword\">const</span> category <span class=\"token operator\">=</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#categories-chart'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token keyword\">let</span> htmlEncode <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token keyword\">var</span> dateMap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  hexo<span class=\"token punctuation\">.</span>locals<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'posts'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">var</span> date <span class=\"token operator\">=</span> post<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">'YYYY-MM-DD'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">var</span> count <span class=\"token operator\">=</span> dateMap<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    dateMap<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> count <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> count <span class=\"token operator\">==</span> <span class=\"token keyword\">undefined</span> <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>  <span class=\"token comment\">// calculate range.</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  <span class=\"token keyword\">const</span> start_date <span class=\"token operator\">=</span> <span class=\"token function\">getMinDate</span><span class=\"token punctuation\">(</span>Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>dateMap<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">startOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'year'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token keyword\">const</span> end_date <span class=\"token operator\">=</span> <span class=\"token function\">moment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token keyword\">const</span> start_year <span class=\"token operator\">=</span> start_date<span class=\"token punctuation\">.</span><span class=\"token function\">year</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token keyword\">const</span> end_year <span class=\"token operator\">=</span> end_date<span class=\"token punctuation\">.</span><span class=\"token function\">year</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>calendar<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&gt;</span> <span class=\"token number\">0</span> <span class=\"token operator\">||</span> post<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&gt;</span> <span class=\"token number\">0</span> <span class=\"token operator\">||</span> tag<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&gt;</span> <span class=\"token number\">0</span> <span class=\"token operator\">||</span> category<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&gt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>calendar<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&gt;</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#postsCalendar'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>calendar<span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-encode'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">'true'</span><span class=\"token punctuation\">)</span> htmlEncode <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>      calendar<span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'style'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">i<span class=\"token punctuation\">,</span> content</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token keyword\">return</span> content<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"height:300px\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"height:\"</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span><span class=\"token number\">300</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>end_year <span class=\"token operator\">-</span> start_year<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">150</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"px\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>      calendar<span class=\"token punctuation\">.</span><span class=\"token function\">after</span><span class=\"token punctuation\">(</span><span class=\"token function\">postsCalendar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&gt;</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#postsChart'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>post<span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-encode'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">'true'</span><span class=\"token punctuation\">)</span> htmlEncode <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>      post<span class=\"token punctuation\">.</span><span class=\"token function\">after</span><span class=\"token punctuation\">(</span><span class=\"token function\">postsChart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&gt;</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#tagsChart'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-encode'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">'true'</span><span class=\"token punctuation\">)</span> htmlEncode <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>      tag<span class=\"token punctuation\">.</span><span class=\"token function\">after</span><span class=\"token punctuation\">(</span><span class=\"token function\">tagsChart</span><span class=\"token punctuation\">(</span>tag<span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-length'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>category<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&gt;</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#categoriesChart'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>category<span class=\"token punctuation\">.</span><span class=\"token function\">attr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-encode'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">'true'</span><span class=\"token punctuation\">)</span> htmlEncode <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>      category<span class=\"token punctuation\">.</span><span class=\"token function\">after</span><span class=\"token punctuation\">(</span><span class=\"token function\">categoriesChart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>htmlEncode<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>      <span class=\"token keyword\">return</span> $<span class=\"token punctuation\">.</span><span class=\"token function\">root</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">html</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">&amp;amp;#</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'&amp;#'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>      <span class=\"token keyword\">return</span> $<span class=\"token punctuation\">.</span><span class=\"token function\">root</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">html</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    <span class=\"token keyword\">return</span> locals</pre></td></tr><tr><td data-num=\"53\"></td><td><pre>  <span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre></pre></td></tr><tr><td data-num=\"56\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">getMinDate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dateList</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>  <span class=\"token keyword\">var</span> dates <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> dateList<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    dates<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">moment</span><span class=\"token punctuation\">(</span>dateList<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'YYYY-MM-DD'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>  <span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>  <span class=\"token keyword\">var</span> minDate <span class=\"token operator\">=</span> moment<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>dates<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>  <span class=\"token keyword\">return</span> minDate</pre></td></tr><tr><td data-num=\"63\"></td><td><pre><span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre></pre></td></tr><tr><td data-num=\"65\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">getCalendar</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">start<span class=\"token punctuation\">,</span> end<span class=\"token punctuation\">,</span> end_date</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>  <span class=\"token keyword\">var</span> res <span class=\"token operator\">=</span> <span class=\"token string\">'['</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> year <span class=\"token operator\">=</span> start<span class=\"token punctuation\">;</span> year <span class=\"token operator\">&lt;=</span> end<span class=\"token punctuation\">;</span> year <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>    <span class=\"token keyword\">var</span> range</pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>year <span class=\"token operator\">&lt;</span> end<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>      range <span class=\"token operator\">=</span> <span class=\"token string\">\"'\"</span> <span class=\"token operator\">+</span> year <span class=\"token operator\">+</span> <span class=\"token string\">\"'\"</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>    <span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>    <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>      range <span class=\"token operator\">=</span> <span class=\"token string\">\"['\"</span> <span class=\"token operator\">+</span> <span class=\"token function\">moment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">year</span><span class=\"token punctuation\">(</span>year<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">startOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'year'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">'YYYY-MM-DD'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"','\"</span> <span class=\"token operator\">+</span> end_date<span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">'YYYY-MM-DD'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"']\"</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>    <span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>    res <span class=\"token operator\">+=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"></span></span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>    {</pre></td></tr><tr><td data-num=\"77\"></td><td><pre>      top : <span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token number\">60</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>year <span class=\"token operator\">-</span> start<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">150</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>      range: <span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>range<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>      cellSize: [13, 13],</pre></td></tr><tr><td data-num=\"80\"></td><td><pre>      splitLine: {</pre></td></tr><tr><td data-num=\"81\"></td><td><pre>          show: true</pre></td></tr><tr><td data-num=\"82\"></td><td><pre>      },</pre></td></tr><tr><td data-num=\"83\"></td><td><pre>      yearLabel: {</pre></td></tr><tr><td data-num=\"84\"></td><td><pre>          position: 'left',</pre></td></tr><tr><td data-num=\"85\"></td><td><pre>          show: true,</pre></td></tr><tr><td data-num=\"86\"></td><td><pre>          color: color</pre></td></tr><tr><td data-num=\"87\"></td><td><pre>      },</pre></td></tr><tr><td data-num=\"88\"></td><td><pre>      monthLabel: {</pre></td></tr><tr><td data-num=\"89\"></td><td><pre>          nameMap: ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],</pre></td></tr><tr><td data-num=\"90\"></td><td><pre>          fontSize: 11,</pre></td></tr><tr><td data-num=\"91\"></td><td><pre>          color: color</pre></td></tr><tr><td data-num=\"92\"></td><td><pre>      },</pre></td></tr><tr><td data-num=\"93\"></td><td><pre>      dayLabel: {</pre></td></tr><tr><td data-num=\"94\"></td><td><pre>          formatter: '{start}  1st',</pre></td></tr><tr><td data-num=\"95\"></td><td><pre>          nameMap: ['','Mon','','Wed','','Fri',''],</pre></td></tr><tr><td data-num=\"96\"></td><td><pre>          fontSize: 11,</pre></td></tr><tr><td data-num=\"97\"></td><td><pre>          color: color</pre></td></tr><tr><td data-num=\"98\"></td><td><pre>      }</pre></td></tr><tr><td data-num=\"99\"></td><td><pre>    },<span class=\"token template-punctuation string\">`</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>  <span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre>  res <span class=\"token operator\">+=</span> <span class=\"token string\">'],'</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>  <span class=\"token keyword\">return</span> res</pre></td></tr><tr><td data-num=\"103\"></td><td><pre><span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre></pre></td></tr><tr><td data-num=\"105\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">getCalendarSeries</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dateMap<span class=\"token punctuation\">,</span> start_year<span class=\"token punctuation\">,</span> end_date</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre>  <span class=\"token keyword\">var</span> res <span class=\"token operator\">=</span> <span class=\"token string\">'['</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre>  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> year <span class=\"token operator\">=</span> start_year<span class=\"token punctuation\">;</span> year <span class=\"token operator\">&lt;=</span> end_date<span class=\"token punctuation\">.</span><span class=\"token function\">year</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> year <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"108\"></td><td><pre>    <span class=\"token keyword\">var</span> tmp_start_date <span class=\"token operator\">=</span> <span class=\"token function\">moment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">year</span><span class=\"token punctuation\">(</span>year<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">startOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'year'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre>    <span class=\"token keyword\">var</span> tmp_end_date <span class=\"token operator\">=</span> year <span class=\"token operator\">==</span> end_date<span class=\"token punctuation\">.</span><span class=\"token function\">year</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> end_date <span class=\"token operator\">:</span> <span class=\"token function\">moment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">year</span><span class=\"token punctuation\">(</span>year<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">endOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'year'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre>    <span class=\"token keyword\">var</span> datePosts <span class=\"token operator\">=</span> <span class=\"token string\">'['</span></pre></td></tr><tr><td data-num=\"111\"></td><td><pre>    <span class=\"token keyword\">var</span> day_time <span class=\"token operator\">=</span> <span class=\"token number\">3600</span> <span class=\"token operator\">*</span> <span class=\"token number\">24</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span></pre></td></tr><tr><td data-num=\"112\"></td><td><pre>    <span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"113\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> time <span class=\"token operator\">=</span> tmp_start_date<span class=\"token punctuation\">;</span> time <span class=\"token operator\">&lt;=</span> tmp_end_date<span class=\"token punctuation\">;</span> time <span class=\"token operator\">+=</span> day_time<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"114\"></td><td><pre>      <span class=\"token keyword\">var</span> date <span class=\"token operator\">=</span> <span class=\"token function\">moment</span><span class=\"token punctuation\">(</span>time<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">'YYYY-MM-DD'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre>      datePosts <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> datePosts <span class=\"token operator\">+</span> <span class=\"token string\">'[\"'</span> <span class=\"token operator\">:</span> datePosts <span class=\"token operator\">+</span> <span class=\"token string\">', [\"'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> date <span class=\"token operator\">+</span> <span class=\"token string\">'\", '</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>dateMap<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> dateMap<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">']'</span></pre></td></tr><tr><td data-num=\"116\"></td><td><pre>      i<span class=\"token operator\">++</span></pre></td></tr><tr><td data-num=\"117\"></td><td><pre>    <span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"118\"></td><td><pre>    datePosts <span class=\"token operator\">+=</span> <span class=\"token string\">']'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"119\"></td><td><pre>    res <span class=\"token operator\">+=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">{</span></span></pre></td></tr><tr><td data-num=\"120\"></td><td><pre>    type: 'heatmap',</pre></td></tr><tr><td data-num=\"121\"></td><td><pre>    coordinateSystem: 'calendar',</pre></td></tr><tr><td data-num=\"122\"></td><td><pre>    calendarIndex: <span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>year <span class=\"token operator\">-</span> start_year<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span></pre></td></tr><tr><td data-num=\"123\"></td><td><pre>    data: <span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>datePosts<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span></pre></td></tr><tr><td data-num=\"124\"></td><td><pre>    itemStyle: {</pre></td></tr><tr><td data-num=\"125\"></td><td><pre>      borderColor: '#fff',</pre></td></tr><tr><td data-num=\"126\"></td><td><pre>      borderWidth: 2,</pre></td></tr><tr><td data-num=\"127\"></td><td><pre>      borderRadius: 4</pre></td></tr><tr><td data-num=\"128\"></td><td><pre>    }</pre></td></tr><tr><td data-num=\"129\"></td><td><pre>  },<span class=\"token template-punctuation string\">`</span></pre></td></tr><tr><td data-num=\"130\"></td><td><pre>  <span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"131\"></td><td><pre>  res <span class=\"token operator\">+=</span> <span class=\"token string\">']'</span></pre></td></tr><tr><td data-num=\"132\"></td><td><pre>  <span class=\"token keyword\">return</span> res</pre></td></tr><tr><td data-num=\"133\"></td><td><pre></pre></td></tr><tr><td data-num=\"134\"></td><td><pre><span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"135\"></td><td><pre></pre></td></tr><tr><td data-num=\"136\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">postsCalendar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"137\"></td><td><pre></pre></td></tr><tr><td data-num=\"138\"></td><td><pre>  <span class=\"token comment\">// post and count map.</span></pre></td></tr><tr><td data-num=\"139\"></td><td><pre>  <span class=\"token keyword\">var</span> dateMap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"140\"></td><td><pre>  hexo<span class=\"token punctuation\">.</span>locals<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'posts'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"141\"></td><td><pre>    <span class=\"token keyword\">var</span> date <span class=\"token operator\">=</span> post<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">'YYYY-MM-DD'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"142\"></td><td><pre>    <span class=\"token keyword\">var</span> count <span class=\"token operator\">=</span> dateMap<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"143\"></td><td><pre>    dateMap<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> count <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> count <span class=\"token operator\">==</span> <span class=\"token keyword\">undefined</span> <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"144\"></td><td><pre>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"145\"></td><td><pre>  <span class=\"token comment\">// calculate range.</span></pre></td></tr><tr><td data-num=\"146\"></td><td><pre>  <span class=\"token keyword\">const</span> start_date <span class=\"token operator\">=</span> <span class=\"token function\">getMinDate</span><span class=\"token punctuation\">(</span>Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>dateMap<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">startOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'year'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"147\"></td><td><pre>  <span class=\"token keyword\">const</span> end_date <span class=\"token operator\">=</span> <span class=\"token function\">moment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"148\"></td><td><pre>  <span class=\"token keyword\">const</span> start_year <span class=\"token operator\">=</span> start_date<span class=\"token punctuation\">.</span><span class=\"token function\">year</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"149\"></td><td><pre>  <span class=\"token keyword\">const</span> end_year <span class=\"token operator\">=</span> end_date<span class=\"token punctuation\">.</span><span class=\"token function\">year</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"150\"></td><td><pre>  <span class=\"token keyword\">const</span> calendar_data <span class=\"token operator\">=</span> <span class=\"token function\">getCalendar</span><span class=\"token punctuation\">(</span>start_year<span class=\"token punctuation\">,</span> end_year<span class=\"token punctuation\">,</span> end_date<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"151\"></td><td><pre>  <span class=\"token keyword\">const</span> series_data <span class=\"token operator\">=</span> <span class=\"token function\">getCalendarSeries</span><span class=\"token punctuation\">(</span>dateMap<span class=\"token punctuation\">,</span> start_year<span class=\"token punctuation\">,</span> end_date<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"152\"></td><td><pre>  <span class=\"token keyword\">const</span> darkmode <span class=\"token operator\">=</span> hexo<span class=\"token punctuation\">.</span>theme<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">[</span><span class=\"token string\">'darkmode'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"153\"></td><td><pre>  </pre></td></tr><tr><td data-num=\"154\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"></span></span></pre></td></tr><tr><td data-num=\"155\"></td><td><pre>  &lt;script id=\"postsCalendar\"&gt;</pre></td></tr><tr><td data-num=\"156\"></td><td><pre>    var color</pre></td></tr><tr><td data-num=\"157\"></td><td><pre>    if (localStorage['theme'] === 'dark') {</pre></td></tr><tr><td data-num=\"158\"></td><td><pre>      color = '#ccc'</pre></td></tr><tr><td data-num=\"159\"></td><td><pre>    }</pre></td></tr><tr><td data-num=\"160\"></td><td><pre>    else if (localStorage['theme'] === 'light') {</pre></td></tr><tr><td data-num=\"161\"></td><td><pre>      color = '#333'</pre></td></tr><tr><td data-num=\"162\"></td><td><pre>    }</pre></td></tr><tr><td data-num=\"163\"></td><td><pre>    else {</pre></td></tr><tr><td data-num=\"164\"></td><td><pre>      color = <span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>darkmode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> ? '#ccc' : '#333'</span></pre></td></tr><tr><td data-num=\"165\"></td><td><pre>    }</pre></td></tr><tr><td data-num=\"166\"></td><td><pre>    var postsCalendar = echarts.init(document.getElementById('posts-calendar'), 'light');</pre></td></tr><tr><td data-num=\"167\"></td><td><pre>    var postsCalendarOption = {</pre></td></tr><tr><td data-num=\"168\"></td><td><pre>      darkMode: color === '#ccc' ? true : false,</pre></td></tr><tr><td data-num=\"169\"></td><td><pre>      textStyle: {</pre></td></tr><tr><td data-num=\"170\"></td><td><pre>        color: color</pre></td></tr><tr><td data-num=\"171\"></td><td><pre>      },</pre></td></tr><tr><td data-num=\"172\"></td><td><pre>      title: {</pre></td></tr><tr><td data-num=\"173\"></td><td><pre>          top: 0,</pre></td></tr><tr><td data-num=\"174\"></td><td><pre>          text: '文章发布日历',</pre></td></tr><tr><td data-num=\"175\"></td><td><pre>          left: 'center',</pre></td></tr><tr><td data-num=\"176\"></td><td><pre>          textStyle: {</pre></td></tr><tr><td data-num=\"177\"></td><td><pre>              color: color</pre></td></tr><tr><td data-num=\"178\"></td><td><pre>          }</pre></td></tr><tr><td data-num=\"179\"></td><td><pre>      },</pre></td></tr><tr><td data-num=\"180\"></td><td><pre>      tooltip: {</pre></td></tr><tr><td data-num=\"181\"></td><td><pre>          formatter: function (obj) {</pre></td></tr><tr><td data-num=\"182\"></td><td><pre>              var value = obj.value;</pre></td></tr><tr><td data-num=\"183\"></td><td><pre>              return '&lt;div style=\"font-size: 14px;\"&gt;' + value[0] + ':' + value[1] + '&lt;/div&gt;';</pre></td></tr><tr><td data-num=\"184\"></td><td><pre>          }</pre></td></tr><tr><td data-num=\"185\"></td><td><pre>      },</pre></td></tr><tr><td data-num=\"186\"></td><td><pre>      visualMap: {</pre></td></tr><tr><td data-num=\"187\"></td><td><pre>          type: 'piecewise',</pre></td></tr><tr><td data-num=\"188\"></td><td><pre>          min: 0,</pre></td></tr><tr><td data-num=\"189\"></td><td><pre>          show: true,</pre></td></tr><tr><td data-num=\"190\"></td><td><pre>          showLabel: true,</pre></td></tr><tr><td data-num=\"191\"></td><td><pre>          pieces: [</pre></td></tr><tr><td data-num=\"192\"></td><td><pre>            {gte: 11, color: '#216E39'}, </pre></td></tr><tr><td data-num=\"193\"></td><td><pre>            {gte: 8, lte: 10, color: '#30A14E'},</pre></td></tr><tr><td data-num=\"194\"></td><td><pre>            {gte: 5, lte: 7, color: '#3FC262'},</pre></td></tr><tr><td data-num=\"195\"></td><td><pre>            {gte: 1, lte: 4, color: '#9BE9A8'},</pre></td></tr><tr><td data-num=\"196\"></td><td><pre>            {value: 0, color: '#EBEDF0'}</pre></td></tr><tr><td data-num=\"197\"></td><td><pre>          ],</pre></td></tr><tr><td data-num=\"198\"></td><td><pre>          calculable: true,</pre></td></tr><tr><td data-num=\"199\"></td><td><pre>          textStyle:{</pre></td></tr><tr><td data-num=\"200\"></td><td><pre>            color: color</pre></td></tr><tr><td data-num=\"201\"></td><td><pre>          },</pre></td></tr><tr><td data-num=\"202\"></td><td><pre>          inRange: {</pre></td></tr><tr><td data-num=\"203\"></td><td><pre>              symbol: 'rect',</pre></td></tr><tr><td data-num=\"204\"></td><td><pre>              color: ['#EBEDF0','#9BE9A8','#3FC262','#30A14E','#216E39'],</pre></td></tr><tr><td data-num=\"205\"></td><td><pre>          },</pre></td></tr><tr><td data-num=\"206\"></td><td><pre>          itemWidth: 12,</pre></td></tr><tr><td data-num=\"207\"></td><td><pre>          itemHeight: 12,</pre></td></tr><tr><td data-num=\"208\"></td><td><pre>          orient: 'horizontal',</pre></td></tr><tr><td data-num=\"209\"></td><td><pre>          left: 'center',</pre></td></tr><tr><td data-num=\"210\"></td><td><pre>          bottom: 80</pre></td></tr><tr><td data-num=\"211\"></td><td><pre>      },</pre></td></tr><tr><td data-num=\"212\"></td><td><pre>      calendar: <span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>calendar_data<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"></span></pre></td></tr><tr><td data-num=\"213\"></td><td><pre>      series: <span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>series_data<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"></span></pre></td></tr><tr><td data-num=\"214\"></td><td><pre>    };</pre></td></tr><tr><td data-num=\"215\"></td><td><pre>    postsCalendar.setOption(postsCalendarOption);</pre></td></tr><tr><td data-num=\"216\"></td><td><pre>    window.addEventListener(\"resize\", () =&gt; { </pre></td></tr><tr><td data-num=\"217\"></td><td><pre>      postsCalendar.resize();</pre></td></tr><tr><td data-num=\"218\"></td><td><pre>    });</pre></td></tr><tr><td data-num=\"219\"></td><td><pre>    &lt;/script&gt;<span class=\"token template-punctuation string\">`</span></pre></td></tr><tr><td data-num=\"220\"></td><td><pre><span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"221\"></td><td><pre></pre></td></tr><tr><td data-num=\"222\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">postsChart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"223\"></td><td><pre>  <span class=\"token keyword\">const</span> startDate <span class=\"token operator\">=</span> <span class=\"token function\">moment</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2021-08'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">// 开始统计的时间</span></pre></td></tr><tr><td data-num=\"224\"></td><td><pre>  <span class=\"token keyword\">const</span> endDate <span class=\"token operator\">=</span> <span class=\"token function\">moment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"225\"></td><td><pre></pre></td></tr><tr><td data-num=\"226\"></td><td><pre>  <span class=\"token keyword\">const</span> monthMap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"227\"></td><td><pre>  <span class=\"token keyword\">const</span> dayTime <span class=\"token operator\">=</span> <span class=\"token number\">3600</span> <span class=\"token operator\">*</span> <span class=\"token number\">24</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span></pre></td></tr><tr><td data-num=\"228\"></td><td><pre>  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> time <span class=\"token operator\">=</span> startDate<span class=\"token punctuation\">;</span> time <span class=\"token operator\">&lt;=</span> endDate<span class=\"token punctuation\">;</span> time <span class=\"token operator\">+=</span> dayTime<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"229\"></td><td><pre>    <span class=\"token keyword\">const</span> month <span class=\"token operator\">=</span> <span class=\"token function\">moment</span><span class=\"token punctuation\">(</span>time<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">'YYYY-MM'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"230\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>monthMap<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>month<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"231\"></td><td><pre>      monthMap<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>month<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"232\"></td><td><pre>    <span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"233\"></td><td><pre>  <span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"234\"></td><td><pre>  hexo<span class=\"token punctuation\">.</span>locals<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'posts'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"235\"></td><td><pre>    <span class=\"token keyword\">const</span> month <span class=\"token operator\">=</span> post<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">'YYYY-MM'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"236\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>monthMap<span class=\"token punctuation\">.</span><span class=\"token function\">has</span><span class=\"token punctuation\">(</span>month<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"237\"></td><td><pre>      monthMap<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>month<span class=\"token punctuation\">,</span> monthMap<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>month<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"238\"></td><td><pre>    <span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"239\"></td><td><pre>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"240\"></td><td><pre>  <span class=\"token keyword\">const</span> monthArr <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>monthMap<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"241\"></td><td><pre>  <span class=\"token keyword\">const</span> monthValueArr <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>monthMap<span class=\"token punctuation\">.</span><span class=\"token function\">values</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"242\"></td><td><pre>  <span class=\"token keyword\">const</span> darkmode <span class=\"token operator\">=</span> hexo<span class=\"token punctuation\">.</span>theme<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">[</span><span class=\"token string\">'darkmode'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"243\"></td><td><pre></pre></td></tr><tr><td data-num=\"244\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"></span></span></pre></td></tr><tr><td data-num=\"245\"></td><td><pre>  &lt;script id=\"postsChart\"&gt;</pre></td></tr><tr><td data-num=\"246\"></td><td><pre>    var color</pre></td></tr><tr><td data-num=\"247\"></td><td><pre>    if (localStorage['theme'] === 'dark') {</pre></td></tr><tr><td data-num=\"248\"></td><td><pre>      color = '#ccc'</pre></td></tr><tr><td data-num=\"249\"></td><td><pre>    }</pre></td></tr><tr><td data-num=\"250\"></td><td><pre>    else if (localStorage['theme'] === 'light') {</pre></td></tr><tr><td data-num=\"251\"></td><td><pre>      color = '#333'</pre></td></tr><tr><td data-num=\"252\"></td><td><pre>    }</pre></td></tr><tr><td data-num=\"253\"></td><td><pre>    else {</pre></td></tr><tr><td data-num=\"254\"></td><td><pre>      color = <span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>darkmode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> ? '#ccc' : '#333'</span></pre></td></tr><tr><td data-num=\"255\"></td><td><pre>    }</pre></td></tr><tr><td data-num=\"256\"></td><td><pre>    var postsChart = echarts.init(document.getElementById('posts-chart'), 'light');</pre></td></tr><tr><td data-num=\"257\"></td><td><pre>    var postsOption = {</pre></td></tr><tr><td data-num=\"258\"></td><td><pre>      darkMode: color === '#ccc' ? true : false,</pre></td></tr><tr><td data-num=\"259\"></td><td><pre>      textStyle: {</pre></td></tr><tr><td data-num=\"260\"></td><td><pre>        color: color</pre></td></tr><tr><td data-num=\"261\"></td><td><pre>      },</pre></td></tr><tr><td data-num=\"262\"></td><td><pre>      title: {</pre></td></tr><tr><td data-num=\"263\"></td><td><pre>        text: '文章发布统计图',</pre></td></tr><tr><td data-num=\"264\"></td><td><pre>        x: 'center',</pre></td></tr><tr><td data-num=\"265\"></td><td><pre>        textStyle: {</pre></td></tr><tr><td data-num=\"266\"></td><td><pre>          color: color</pre></td></tr><tr><td data-num=\"267\"></td><td><pre>        }</pre></td></tr><tr><td data-num=\"268\"></td><td><pre>      },</pre></td></tr><tr><td data-num=\"269\"></td><td><pre>      tooltip: {</pre></td></tr><tr><td data-num=\"270\"></td><td><pre>        trigger: 'axis'</pre></td></tr><tr><td data-num=\"271\"></td><td><pre>      },</pre></td></tr><tr><td data-num=\"272\"></td><td><pre>      xAxis: {</pre></td></tr><tr><td data-num=\"273\"></td><td><pre>        name: '日期',</pre></td></tr><tr><td data-num=\"274\"></td><td><pre>        type: 'category',</pre></td></tr><tr><td data-num=\"275\"></td><td><pre>        axisTick: {</pre></td></tr><tr><td data-num=\"276\"></td><td><pre>          show: false</pre></td></tr><tr><td data-num=\"277\"></td><td><pre>        },</pre></td></tr><tr><td data-num=\"278\"></td><td><pre>        axisLine: {</pre></td></tr><tr><td data-num=\"279\"></td><td><pre>          show: true,</pre></td></tr><tr><td data-num=\"280\"></td><td><pre>          lineStyle: {</pre></td></tr><tr><td data-num=\"281\"></td><td><pre>            color: color</pre></td></tr><tr><td data-num=\"282\"></td><td><pre>          }</pre></td></tr><tr><td data-num=\"283\"></td><td><pre>        },</pre></td></tr><tr><td data-num=\"284\"></td><td><pre>        data: <span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>monthArr<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"></span></pre></td></tr><tr><td data-num=\"285\"></td><td><pre>      },</pre></td></tr><tr><td data-num=\"286\"></td><td><pre>      yAxis: {</pre></td></tr><tr><td data-num=\"287\"></td><td><pre>        name: '文章篇数',</pre></td></tr><tr><td data-num=\"288\"></td><td><pre>        type: 'value',</pre></td></tr><tr><td data-num=\"289\"></td><td><pre>        splitLine: {</pre></td></tr><tr><td data-num=\"290\"></td><td><pre>          show: false</pre></td></tr><tr><td data-num=\"291\"></td><td><pre>        },</pre></td></tr><tr><td data-num=\"292\"></td><td><pre>        axisTick: {</pre></td></tr><tr><td data-num=\"293\"></td><td><pre>          show: false</pre></td></tr><tr><td data-num=\"294\"></td><td><pre>        },</pre></td></tr><tr><td data-num=\"295\"></td><td><pre>        axisLine: {</pre></td></tr><tr><td data-num=\"296\"></td><td><pre>          show: true,</pre></td></tr><tr><td data-num=\"297\"></td><td><pre>          lineStyle: {</pre></td></tr><tr><td data-num=\"298\"></td><td><pre>            color: color</pre></td></tr><tr><td data-num=\"299\"></td><td><pre>          }</pre></td></tr><tr><td data-num=\"300\"></td><td><pre>        }</pre></td></tr><tr><td data-num=\"301\"></td><td><pre>      },</pre></td></tr><tr><td data-num=\"302\"></td><td><pre>      series: [{</pre></td></tr><tr><td data-num=\"303\"></td><td><pre>        name: '文章篇数',</pre></td></tr><tr><td data-num=\"304\"></td><td><pre>        type: 'line',</pre></td></tr><tr><td data-num=\"305\"></td><td><pre>        smooth: true,</pre></td></tr><tr><td data-num=\"306\"></td><td><pre>        lineStyle: {</pre></td></tr><tr><td data-num=\"307\"></td><td><pre>            width: 0</pre></td></tr><tr><td data-num=\"308\"></td><td><pre>        },</pre></td></tr><tr><td data-num=\"309\"></td><td><pre>        showSymbol: false,</pre></td></tr><tr><td data-num=\"310\"></td><td><pre>        itemStyle: {</pre></td></tr><tr><td data-num=\"311\"></td><td><pre>          opacity: 1,</pre></td></tr><tr><td data-num=\"312\"></td><td><pre>          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{</pre></td></tr><tr><td data-num=\"313\"></td><td><pre>            offset: 0,</pre></td></tr><tr><td data-num=\"314\"></td><td><pre>            color: 'rgba(128, 255, 165)'</pre></td></tr><tr><td data-num=\"315\"></td><td><pre>          },</pre></td></tr><tr><td data-num=\"316\"></td><td><pre>          {</pre></td></tr><tr><td data-num=\"317\"></td><td><pre>            offset: 1,</pre></td></tr><tr><td data-num=\"318\"></td><td><pre>            color: 'rgba(1, 191, 236)'</pre></td></tr><tr><td data-num=\"319\"></td><td><pre>          }])</pre></td></tr><tr><td data-num=\"320\"></td><td><pre>        },</pre></td></tr><tr><td data-num=\"321\"></td><td><pre>        areaStyle: {</pre></td></tr><tr><td data-num=\"322\"></td><td><pre>          opacity: 1,</pre></td></tr><tr><td data-num=\"323\"></td><td><pre>          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{</pre></td></tr><tr><td data-num=\"324\"></td><td><pre>            offset: 0,</pre></td></tr><tr><td data-num=\"325\"></td><td><pre>            color: 'rgba(128, 255, 165)'</pre></td></tr><tr><td data-num=\"326\"></td><td><pre>          }, {</pre></td></tr><tr><td data-num=\"327\"></td><td><pre>            offset: 1,</pre></td></tr><tr><td data-num=\"328\"></td><td><pre>            color: 'rgba(1, 191, 236)'</pre></td></tr><tr><td data-num=\"329\"></td><td><pre>          }])</pre></td></tr><tr><td data-num=\"330\"></td><td><pre>        },</pre></td></tr><tr><td data-num=\"331\"></td><td><pre>        data: <span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>monthValueArr<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span></pre></td></tr><tr><td data-num=\"332\"></td><td><pre>        markLine: {</pre></td></tr><tr><td data-num=\"333\"></td><td><pre>          data: [{</pre></td></tr><tr><td data-num=\"334\"></td><td><pre>            name: '平均值',</pre></td></tr><tr><td data-num=\"335\"></td><td><pre>            type: 'average'</pre></td></tr><tr><td data-num=\"336\"></td><td><pre>          }]</pre></td></tr><tr><td data-num=\"337\"></td><td><pre>        }</pre></td></tr><tr><td data-num=\"338\"></td><td><pre>      }]</pre></td></tr><tr><td data-num=\"339\"></td><td><pre>    };</pre></td></tr><tr><td data-num=\"340\"></td><td><pre>    postsChart.setOption(postsOption);</pre></td></tr><tr><td data-num=\"341\"></td><td><pre>    window.addEventListener(\"resize\", () =&gt; { </pre></td></tr><tr><td data-num=\"342\"></td><td><pre>      postsChart.resize();</pre></td></tr><tr><td data-num=\"343\"></td><td><pre>    });</pre></td></tr><tr><td data-num=\"344\"></td><td><pre>    &lt;/script&gt;<span class=\"token template-punctuation string\">`</span></pre></td></tr><tr><td data-num=\"345\"></td><td><pre><span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"346\"></td><td><pre></pre></td></tr><tr><td data-num=\"347\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">tagsChart</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">len</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"348\"></td><td><pre>  <span class=\"token keyword\">const</span> tagArr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"349\"></td><td><pre>  hexo<span class=\"token punctuation\">.</span>locals<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tags'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">tag</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"350\"></td><td><pre>    tagArr<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> tag<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> tag<span class=\"token punctuation\">.</span>length <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"351\"></td><td><pre>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"352\"></td><td><pre>  tagArr<span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> b<span class=\"token punctuation\">.</span>value <span class=\"token operator\">-</span> a<span class=\"token punctuation\">.</span>value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"353\"></td><td><pre></pre></td></tr><tr><td data-num=\"354\"></td><td><pre>  <span class=\"token keyword\">let</span> dataLength <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>tagArr<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">,</span> len<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> tagArr<span class=\"token punctuation\">.</span>length</pre></td></tr><tr><td data-num=\"355\"></td><td><pre>  <span class=\"token keyword\">const</span> tagNameArr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"356\"></td><td><pre>  <span class=\"token keyword\">const</span> tagCountArr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"357\"></td><td><pre>  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> dataLength<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"358\"></td><td><pre>    tagNameArr<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>tagArr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"359\"></td><td><pre>    tagCountArr<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>tagArr<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"360\"></td><td><pre>  <span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"361\"></td><td><pre>  <span class=\"token keyword\">const</span> tagNameArrJson <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>tagNameArr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"362\"></td><td><pre>  <span class=\"token keyword\">const</span> tagCountArrJson <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>tagCountArr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"363\"></td><td><pre>  <span class=\"token keyword\">const</span> darkmode <span class=\"token operator\">=</span> hexo<span class=\"token punctuation\">.</span>theme<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">[</span><span class=\"token string\">'darkmode'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"364\"></td><td><pre></pre></td></tr><tr><td data-num=\"365\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"></span></span></pre></td></tr><tr><td data-num=\"366\"></td><td><pre>  &lt;script id=\"tagsChart\"&gt;</pre></td></tr><tr><td data-num=\"367\"></td><td><pre>    var color</pre></td></tr><tr><td data-num=\"368\"></td><td><pre>    if (localStorage['theme'] === 'dark') {</pre></td></tr><tr><td data-num=\"369\"></td><td><pre>      color = '#ccc'</pre></td></tr><tr><td data-num=\"370\"></td><td><pre>    }</pre></td></tr><tr><td data-num=\"371\"></td><td><pre>    else if (localStorage['theme'] === 'light') {</pre></td></tr><tr><td data-num=\"372\"></td><td><pre>      color = '#333'</pre></td></tr><tr><td data-num=\"373\"></td><td><pre>    }</pre></td></tr><tr><td data-num=\"374\"></td><td><pre>    else {</pre></td></tr><tr><td data-num=\"375\"></td><td><pre>      color = <span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>darkmode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> ? '#ccc' : '#333'</span></pre></td></tr><tr><td data-num=\"376\"></td><td><pre>    }</pre></td></tr><tr><td data-num=\"377\"></td><td><pre>    var tagsChart = echarts.init(document.getElementById('tags-chart'), 'light');</pre></td></tr><tr><td data-num=\"378\"></td><td><pre>    var tagsOption = {</pre></td></tr><tr><td data-num=\"379\"></td><td><pre>      darkMode: color === '#ccc' ? true : false,</pre></td></tr><tr><td data-num=\"380\"></td><td><pre>      textStyle: {</pre></td></tr><tr><td data-num=\"381\"></td><td><pre>        color: color</pre></td></tr><tr><td data-num=\"382\"></td><td><pre>      },</pre></td></tr><tr><td data-num=\"383\"></td><td><pre>      title: {</pre></td></tr><tr><td data-num=\"384\"></td><td><pre>        text: 'Top <span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>dataLength<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> 标签统计图',</span></pre></td></tr><tr><td data-num=\"385\"></td><td><pre>        x: 'center',</pre></td></tr><tr><td data-num=\"386\"></td><td><pre>        textStyle: {</pre></td></tr><tr><td data-num=\"387\"></td><td><pre>          color: color</pre></td></tr><tr><td data-num=\"388\"></td><td><pre>        }</pre></td></tr><tr><td data-num=\"389\"></td><td><pre>      },</pre></td></tr><tr><td data-num=\"390\"></td><td><pre>      tooltip: {},</pre></td></tr><tr><td data-num=\"391\"></td><td><pre>      xAxis: {</pre></td></tr><tr><td data-num=\"392\"></td><td><pre>        name: '标签',</pre></td></tr><tr><td data-num=\"393\"></td><td><pre>        type: 'category',</pre></td></tr><tr><td data-num=\"394\"></td><td><pre>        axisTick: {</pre></td></tr><tr><td data-num=\"395\"></td><td><pre>          show: false</pre></td></tr><tr><td data-num=\"396\"></td><td><pre>        },</pre></td></tr><tr><td data-num=\"397\"></td><td><pre>        axisLine: {</pre></td></tr><tr><td data-num=\"398\"></td><td><pre>          show: true,</pre></td></tr><tr><td data-num=\"399\"></td><td><pre>          lineStyle: {</pre></td></tr><tr><td data-num=\"400\"></td><td><pre>            color: color</pre></td></tr><tr><td data-num=\"401\"></td><td><pre>          }</pre></td></tr><tr><td data-num=\"402\"></td><td><pre>        },</pre></td></tr><tr><td data-num=\"403\"></td><td><pre>        data: <span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>tagNameArrJson<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"></span></pre></td></tr><tr><td data-num=\"404\"></td><td><pre>      },</pre></td></tr><tr><td data-num=\"405\"></td><td><pre>      yAxis: {</pre></td></tr><tr><td data-num=\"406\"></td><td><pre>        name: '文章篇数',</pre></td></tr><tr><td data-num=\"407\"></td><td><pre>        type: 'value',</pre></td></tr><tr><td data-num=\"408\"></td><td><pre>        splitLine: {</pre></td></tr><tr><td data-num=\"409\"></td><td><pre>          show: false</pre></td></tr><tr><td data-num=\"410\"></td><td><pre>        },</pre></td></tr><tr><td data-num=\"411\"></td><td><pre>        axisTick: {</pre></td></tr><tr><td data-num=\"412\"></td><td><pre>          show: false</pre></td></tr><tr><td data-num=\"413\"></td><td><pre>        },</pre></td></tr><tr><td data-num=\"414\"></td><td><pre>        axisLine: {</pre></td></tr><tr><td data-num=\"415\"></td><td><pre>          show: true,</pre></td></tr><tr><td data-num=\"416\"></td><td><pre>          lineStyle: {</pre></td></tr><tr><td data-num=\"417\"></td><td><pre>            color: color</pre></td></tr><tr><td data-num=\"418\"></td><td><pre>          }</pre></td></tr><tr><td data-num=\"419\"></td><td><pre>        }</pre></td></tr><tr><td data-num=\"420\"></td><td><pre>      },</pre></td></tr><tr><td data-num=\"421\"></td><td><pre>      series: [{</pre></td></tr><tr><td data-num=\"422\"></td><td><pre>        name: '文章篇数',</pre></td></tr><tr><td data-num=\"423\"></td><td><pre>        type: 'bar',</pre></td></tr><tr><td data-num=\"424\"></td><td><pre>        data: <span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>tagCountArrJson<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span></pre></td></tr><tr><td data-num=\"425\"></td><td><pre>        itemStyle: {</pre></td></tr><tr><td data-num=\"426\"></td><td><pre>          opacity: 1,</pre></td></tr><tr><td data-num=\"427\"></td><td><pre>          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{</pre></td></tr><tr><td data-num=\"428\"></td><td><pre>            offset: 0,</pre></td></tr><tr><td data-num=\"429\"></td><td><pre>            color: 'rgba(128, 255, 165)'</pre></td></tr><tr><td data-num=\"430\"></td><td><pre>          },</pre></td></tr><tr><td data-num=\"431\"></td><td><pre>          {</pre></td></tr><tr><td data-num=\"432\"></td><td><pre>            offset: 1,</pre></td></tr><tr><td data-num=\"433\"></td><td><pre>            color: 'rgba(1, 191, 236)'</pre></td></tr><tr><td data-num=\"434\"></td><td><pre>          }])</pre></td></tr><tr><td data-num=\"435\"></td><td><pre>        },</pre></td></tr><tr><td data-num=\"436\"></td><td><pre>        emphasis: {</pre></td></tr><tr><td data-num=\"437\"></td><td><pre>          itemStyle: {</pre></td></tr><tr><td data-num=\"438\"></td><td><pre>            opacity: 1,</pre></td></tr><tr><td data-num=\"439\"></td><td><pre>            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{</pre></td></tr><tr><td data-num=\"440\"></td><td><pre>              offset: 0,</pre></td></tr><tr><td data-num=\"441\"></td><td><pre>              color: 'rgba(128, 255, 195)'</pre></td></tr><tr><td data-num=\"442\"></td><td><pre>            },</pre></td></tr><tr><td data-num=\"443\"></td><td><pre>            {</pre></td></tr><tr><td data-num=\"444\"></td><td><pre>              offset: 1,</pre></td></tr><tr><td data-num=\"445\"></td><td><pre>              color: 'rgba(1, 211, 255)'</pre></td></tr><tr><td data-num=\"446\"></td><td><pre>            }])</pre></td></tr><tr><td data-num=\"447\"></td><td><pre>          }</pre></td></tr><tr><td data-num=\"448\"></td><td><pre>        },</pre></td></tr><tr><td data-num=\"449\"></td><td><pre>        markLine: {</pre></td></tr><tr><td data-num=\"450\"></td><td><pre>          data: [{</pre></td></tr><tr><td data-num=\"451\"></td><td><pre>            name: '平均值',</pre></td></tr><tr><td data-num=\"452\"></td><td><pre>            type: 'average'</pre></td></tr><tr><td data-num=\"453\"></td><td><pre>          }]</pre></td></tr><tr><td data-num=\"454\"></td><td><pre>        }</pre></td></tr><tr><td data-num=\"455\"></td><td><pre>      }]</pre></td></tr><tr><td data-num=\"456\"></td><td><pre>    };</pre></td></tr><tr><td data-num=\"457\"></td><td><pre>    tagsChart.setOption(tagsOption);</pre></td></tr><tr><td data-num=\"458\"></td><td><pre>    window.addEventListener(\"resize\", () =&gt; { </pre></td></tr><tr><td data-num=\"459\"></td><td><pre>      tagsChart.resize();</pre></td></tr><tr><td data-num=\"460\"></td><td><pre>    });</pre></td></tr><tr><td data-num=\"461\"></td><td><pre>    &lt;/script&gt;<span class=\"token template-punctuation string\">`</span></pre></td></tr><tr><td data-num=\"462\"></td><td><pre><span class=\"token punctuation\">}</span></pre></td></tr><tr><td data-num=\"463\"></td><td><pre></pre></td></tr><tr><td data-num=\"464\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token function\">categoriesChart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"465\"></td><td><pre>  <span class=\"token keyword\">const</span> categoryArr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"466\"></td><td><pre>  hexo<span class=\"token punctuation\">.</span>locals<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'categories'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">category</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></pre></td></tr><tr><td data-num=\"467\"></td><td><pre>    categoryArr<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> category<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> category<span class=\"token punctuation\">.</span>length <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"468\"></td><td><pre>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"469\"></td><td><pre>  categoryArr<span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> b<span class=\"token punctuation\">.</span>value <span class=\"token operator\">-</span> a<span class=\"token punctuation\">.</span>value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"470\"></td><td><pre>  <span class=\"token keyword\">const</span> categoryArrJson <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>categoryArr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"471\"></td><td><pre>  <span class=\"token keyword\">const</span> darkmode <span class=\"token operator\">=</span> hexo<span class=\"token punctuation\">.</span>theme<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">[</span><span class=\"token string\">'darkmode'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"472\"></td><td><pre></pre></td></tr><tr><td data-num=\"473\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"></span></span></pre></td></tr><tr><td data-num=\"474\"></td><td><pre>  &lt;script id=\"categoriesChart\"&gt;</pre></td></tr><tr><td data-num=\"475\"></td><td><pre>    var color</pre></td></tr><tr><td data-num=\"476\"></td><td><pre>    if (localStorage['theme'] === 'dark') {</pre></td></tr><tr><td data-num=\"477\"></td><td><pre>      color = '#ccc'</pre></td></tr><tr><td data-num=\"478\"></td><td><pre>    }</pre></td></tr><tr><td data-num=\"479\"></td><td><pre>    else if (localStorage['theme'] === 'light') {</pre></td></tr><tr><td data-num=\"480\"></td><td><pre>      color = '#333'</pre></td></tr><tr><td data-num=\"481\"></td><td><pre>    }</pre></td></tr><tr><td data-num=\"482\"></td><td><pre>    else {</pre></td></tr><tr><td data-num=\"483\"></td><td><pre>      color = <span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>darkmode<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> ? '#ccc' : '#333'</span></pre></td></tr><tr><td data-num=\"484\"></td><td><pre>    } </pre></td></tr><tr><td data-num=\"485\"></td><td><pre>    var categoriesChart = echarts.init(document.getElementById('categories-chart'), 'light');</pre></td></tr><tr><td data-num=\"486\"></td><td><pre>    var categoriesOption = {</pre></td></tr><tr><td data-num=\"487\"></td><td><pre>      darkMode: color === '#ccc' ? true : false,</pre></td></tr><tr><td data-num=\"488\"></td><td><pre>      textStyle: {</pre></td></tr><tr><td data-num=\"489\"></td><td><pre>        color: color</pre></td></tr><tr><td data-num=\"490\"></td><td><pre>      },</pre></td></tr><tr><td data-num=\"491\"></td><td><pre>      title: {</pre></td></tr><tr><td data-num=\"492\"></td><td><pre>        text: '文章分类统计图',</pre></td></tr><tr><td data-num=\"493\"></td><td><pre>        x: 'center',</pre></td></tr><tr><td data-num=\"494\"></td><td><pre>        textStyle: {</pre></td></tr><tr><td data-num=\"495\"></td><td><pre>          color: color</pre></td></tr><tr><td data-num=\"496\"></td><td><pre>        }</pre></td></tr><tr><td data-num=\"497\"></td><td><pre>      },</pre></td></tr><tr><td data-num=\"498\"></td><td><pre>      legend: {</pre></td></tr><tr><td data-num=\"499\"></td><td><pre>        top: 'bottom',</pre></td></tr><tr><td data-num=\"500\"></td><td><pre>        textStyle: {</pre></td></tr><tr><td data-num=\"501\"></td><td><pre>          color: color</pre></td></tr><tr><td data-num=\"502\"></td><td><pre>        }</pre></td></tr><tr><td data-num=\"503\"></td><td><pre>      },</pre></td></tr><tr><td data-num=\"504\"></td><td><pre>      tooltip: {</pre></td></tr><tr><td data-num=\"505\"></td><td><pre>        trigger: 'item',</pre></td></tr><tr><td data-num=\"506\"></td><td><pre>        formatter: \"{a} &lt;br/&gt;{b} : {c} ({d}%)\",</pre></td></tr><tr><td data-num=\"507\"></td><td><pre>      },</pre></td></tr><tr><td data-num=\"508\"></td><td><pre>      series: [{</pre></td></tr><tr><td data-num=\"509\"></td><td><pre>        name: '文章篇数',</pre></td></tr><tr><td data-num=\"510\"></td><td><pre>        type: 'pie',</pre></td></tr><tr><td data-num=\"511\"></td><td><pre>        radius: [30, 80],</pre></td></tr><tr><td data-num=\"512\"></td><td><pre>        center: ['50%', '50%'],</pre></td></tr><tr><td data-num=\"513\"></td><td><pre>        roseType: 'area',</pre></td></tr><tr><td data-num=\"514\"></td><td><pre>        label: {</pre></td></tr><tr><td data-num=\"515\"></td><td><pre>          formatter: \"{b} : {c} ({d}%)\"</pre></td></tr><tr><td data-num=\"516\"></td><td><pre>        },</pre></td></tr><tr><td data-num=\"517\"></td><td><pre>        data: <span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>categoryArrJson<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span></pre></td></tr><tr><td data-num=\"518\"></td><td><pre>        itemStyle: {</pre></td></tr><tr><td data-num=\"519\"></td><td><pre>          emphasis: {</pre></td></tr><tr><td data-num=\"520\"></td><td><pre>            shadowBlur: 10,</pre></td></tr><tr><td data-num=\"521\"></td><td><pre>            shadowOffsetX: 0,</pre></td></tr><tr><td data-num=\"522\"></td><td><pre>            shadowColor: 'rgba(255, 255, 255, 0.5)'</pre></td></tr><tr><td data-num=\"523\"></td><td><pre>          }</pre></td></tr><tr><td data-num=\"524\"></td><td><pre>        }</pre></td></tr><tr><td data-num=\"525\"></td><td><pre>      }]</pre></td></tr><tr><td data-num=\"526\"></td><td><pre>    };</pre></td></tr><tr><td data-num=\"527\"></td><td><pre>    categoriesChart.setOption(categoriesOption);</pre></td></tr><tr><td data-num=\"528\"></td><td><pre>    window.addEventListener(\"resize\", () =&gt; { </pre></td></tr><tr><td data-num=\"529\"></td><td><pre>      categoriesChart.resize();</pre></td></tr><tr><td data-num=\"530\"></td><td><pre>    });</pre></td></tr><tr><td data-num=\"531\"></td><td><pre>    &lt;/script&gt;<span class=\"token template-punctuation string\">`</span></pre></td></tr><tr><td data-num=\"532\"></td><td><pre><span class=\"token punctuation\">}</span></pre></td></tr></tbody></table></figure><p>更多统计图的自定义属性可以查看 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9lY2hhcnRzLmFwYWNoZS5vcmcvemgvb3B0aW9uLmh0bWw=\">ECharts 配置项文档</span>，根据自行喜好对 ECharts 统计图进行修改。</p>\n<p>在这里，文章发布日历我是仿 github 的绿色样式</p>\n<p><img data-src=\"/%E7%B4%A0%E6%9D%90/hexo/shoka/add_statistic_1.jpg\" alt=\"\"></p>\n",
            "tags": [
                "hexo"
            ]
        }
    ]
}