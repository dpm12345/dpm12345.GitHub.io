{
    "version": "https://jsonfeed.org/version/1",
    "title": "dpm12345 • All posts by \"mfc\" tag",
    "description": "学习记录",
    "home_page_url": "http://dpm12345.github.io",
    "items": [
        {
            "id": "http://dpm12345.github.io/2022/01/08/MFC/MFC%20%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C%E6%B1%87%E6%80%BB/",
            "url": "http://dpm12345.github.io/2022/01/08/MFC/MFC%20%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C%E6%B1%87%E6%80%BB/",
            "title": "MFC 相关操作汇总",
            "date_published": "2022-01-08T04:07:26.000Z",
            "content_html": "<h2 id=\"edit-编辑框文本不覆盖\"><a class=\"anchor\" href=\"#edit-编辑框文本不覆盖\">#</a> edit 编辑框文本不覆盖</h2>\n<p>edit 框如果使用 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mtext>变量名</mtext><mi mathvariant=\"normal\">.</mi><mi>S</mi><mi>e</mi><mi>t</mi><mi>W</mi><mi>i</mi><mi>n</mi><mi>d</mi><mi>o</mi><mi>w</mi><mi>T</mi><mi>e</mi><mi>x</mi><mi>t</mi><mi>W</mi><mo stretchy=\"false\">(</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">变量名.SetWindowTextW()</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord cjk_fallback\">变</span><span class=\"mord cjk_fallback\">量</span><span class=\"mord cjk_fallback\">名</span><span class=\"mord\">.</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">x</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"mopen\">(</span><span class=\"mclose\">)</span></span></span></span></p>\n<p>那么 edit 框内的内容就会被覆盖</p>\n<p>如果想要追加内容，可采用以下代码</p>\n<p>假设 edit 框关联的变量名为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>o</mi><mi>u</mi><mi>t</mi><mi>c</mi><mi>o</mi><mi>m</mi><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">outcome</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.61508em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">e</span></span></span></span></p>\n<pre><code class=\"language-c++\">outcome.SetSel(-1);        // 定位到文末\noutcome.ReplaceSel(TEXT(&quot;读取文件失败\\r\\n&quot;));     // 输出并换行\n</code></pre>\n<h2 id=\"使用按钮选择文件并获取路径\"><a class=\"anchor\" href=\"#使用按钮选择文件并获取路径\">#</a> 使用按钮选择文件并获取路径</h2>\n<p>在进行选择相关文件的相关操作时，如果想要在弹出的一个对话框内选择文件，并且能够获取到路径名，那么可以使用以下代码</p>\n<pre><code class=\"language-c++\">CString filename;           // 保存路径\nCFileDialog opendlg(TRUE, _T(&quot;*&quot;), _T(&quot;&quot;), OFN_OVERWRITEPROMPT, _T(&quot;所有文件(*.*;)|*.*||&quot;), NULL);\nif (opendlg.DoModal() == IDOK)\n&#123;\n\tfilename = opendlg.GetPathName();\n&#125;\n</code></pre>\n<p>这一段代码结束后，filename 就存储了文件的路径</p>\n<h2 id=\"修改控件的字体及大小\"><a class=\"anchor\" href=\"#修改控件的字体及大小\">#</a> 修改控件的字体及大小</h2>\n<p>首先要为控件关联一个变量，假设该变量名为 text</p>\n<p>然后定义一个 CFont 类型的 font，用于创建一个字体</p>\n<p>使用 <code>font.CreatePointFont(&quot;100&quot;,&quot;楷体&quot;)</code>  其中 100 为字体大小，楷体为字体类型</p>\n<p>创建好字体后，便使用 <code>$SetFont()</code>  函数，将 font 的地址作为参数</p>\n<p>那么代码即为</p>\n<pre><code class=\"language-c++\">CFont font;\nfont.CreatePointFont(100, _T(&quot;楷体&quot;));\ntext.SetFont(&amp;font);\n</code></pre>\n<h2 id=\"修改控件颜色\"><a class=\"anchor\" href=\"#修改控件颜色\">#</a> 修改控件颜色</h2>\n<p>右键对话框，点击类向导，在出现的对话框内，选择消息，找到其中的 <code>WM_CTLCOLOR</code> ，并添加处理程序</p>\n<p><img data-src=\"/%E7%B4%A0%E6%9D%90/MFC_color_1.png\" alt=\"\" /></p>\n<p><img data-src=\"/%E7%B4%A0%E6%9D%90/MFC_color_2.png\" alt=\"\" /></p>\n<p>在程序中找到该成员函数实现</p>\n<p><img data-src=\"/%E7%B4%A0%E6%9D%90/MFC_color_3.png\" alt=\"\" /></p>\n<p>在代码中写上如下代码</p>\n<pre><code class=\"language-c++\">if (pWnd-&gt;GetDlgCtrlID() == IDC_Display)// IDC_Display 为所选文本框 ID, 如果想选择其他控件则可以改为相应的 ID\n&#123;\n\n\tpDC-&gt;SetTextColor(RGB(255, 0, 0));// 设置字体颜色\n\n\tpDC-&gt;SetBkColor(RGB(0, 255, 0));// 设置背景颜色\n \n\t//pDC-&gt;SetBkMode (TRANSPARENT);// 设置背景透明\n\n&#125;\n</code></pre>\n<p>上面是针对指定控件来修改的，同时也可以对指定空间类型进行修改</p>\n<pre><code class=\"language-c++\">if (nCtlColor == CTLCOLOR_STATIC)   //CTLCOLOR_STATIC 为控件类型\n&#123;\n\tpDC-&gt;SetTextColor(RGB(0, 255, 0));// 设置字体颜色\n\tpDC-&gt;SetBkColor(RGB(255, 0, 0));// 设置背景颜色\n&#125;\n</code></pre>\n<p>支持的控件类型如下:</p>\n<ul>\n<li>CTLCOLOR_BTN 按钮控件</li>\n<li>CTLCOLOR_DLG 对话框</li>\n<li>CTLCOLOR_EDIT 编辑框</li>\n<li>CTLCOLOR_LISTBOX 列表控件</li>\n<li>CTLCOLOR_MSGBOX 消息控件</li>\n<li>CTLCOLOR_SCROLLBAR 滚动条控件</li>\n<li>CTLCOLOR_STATIC 静态控件</li>\n</ul>\n",
            "tags": [
                "MFC"
            ]
        }
    ]
}